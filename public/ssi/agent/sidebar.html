<!-- Left side column. contains the logo and sidebar -->
<aside class="main-sidebar" id="sidebar">

    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
        <!-- Sidebar Menu -->
        <ul class="sidebar-menu">
            <li class="header">HEADER</li>
            <!-- Optionally, you can add icons to the links -->
            <li :class="{ active: uri.home.isActive }"><a href="/agent/home"><i class="fa fa-home"></i> <span>首页</span></a></li>
            <li class="treeview" :class="{ active: uri.player.isActive }">
                <a href="#"><i class="fa fa-gamepad"></i> <span>玩家管理</span>
                    <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
                </a>
                <ul class="treeview-menu">
                    <li :class="{ active: uri.player.list.isActive }"><a href="#"><i class="fa fa-circle-o"></i>玩家列表</a></li>
                    <li :class="{ active: uri.player.top_up.isActive }"><a href="#"><i class="fa fa-circle-o"></i>玩家充值</a></li>
                </ul>
            </li>
            <li class="treeview" :class="{ active: uri.subagent.isActive }">
                <a href="#"><i class="fa fa-users"></i> <span>子代理商管理</span>
                    <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
                </a>
                <ul class="treeview-menu">
                    <li :class="{ active: uri.subagent.list.isActive }"><a href="/agent/subagent/list"><i class="fa fa-circle-o"></i>子代理商列表</a></li>
                    <li :class="{ active: uri.subagent.create.isActive }"><a href="/agent/subagent/create"><i class="fa fa-circle-o"></i>新建子代理商</a></li>
                </ul>
            </li>
            <li class="treeview" :class="{ active: uri.top_up.isActive }">
                <a href="#"><i class="fa fa-credit-card"></i> <span>充值记录</span>
                    <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
                </a>
                <ul class="treeview-menu">
                    <li :class="{ active: uri.top_up.child.isActive }"><a href="/agent/top-up/child"><i class="fa fa-circle-o"></i>代理商充值记录</a></li>
                    <li :class="{ active: uri.top_up.player.isActive }"><a href="/agent/top-up/player"><i class="fa fa-circle-o"></i>玩家充值记录</a></li>
                </ul>
            </li>
            <li :class="{ active: uri.info.isActive }"><a href="/agent/info"><i class="fa fa-user"></i>个人信息</a></li>
        </ul>
        <!-- /.sidebar-menu -->
    </section>
    <!-- /.sidebar -->
</aside>

<script>
    var sideBarApp = new Vue({
        el: '#sidebar',
        data: {
            uri: {
                home: {
                    isActive: false,
                },
                player: {
                    isActive: false,
                    list: {
                        isActive: false,
                    },
                    top_up: {
                        isActive: false,
                    },
                },
                subagent: {
                    isActive: false,
                    list: {
                        isActive: false,
                    },
                    create: {
                        isActive: false,
                    },
                },
                top_up: {
                    isActive: false,
                    child: {
                        isActive: false,
                    },
                    player: {
                        isActive: false,
                    }
                },
                info: {
                    isActive: false,
                }
            }
        },
        methods: {

        },
        created: function () {
            var _self = this;
            var uri = location.href.match(/http:\/\/[\w\.-]+\/agent\/([\w\/-]+)/)[1]
                .replace('-', '_')
                .split('/');
            uri.reduce(function (lastValue, currentValue) {
                lastValue[currentValue].isActive = true;
                return lastValue[currentValue];
            }, _self.uri);
        }
    })
</script>